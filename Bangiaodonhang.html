<script>
(function() {
    // ... (phần đầu giữ nguyên)

    // Hàm lọc dữ liệu cập nhật
    function filterData(data, driverMap) {
      const ngay = getUrlParameter('ngay'); // 10/5/2025
      const ten = getUrlParameter('ten');   // Phùng Như Quang

      return data.filter(item => {
        // Kiểm tra ngày nếu có tham số
        const ngayTrung = ngay ? item.AP === ngay : true;
        
        // Kiểm tra tài xế tồn tại trong danh sách NV giao hàng
        let tenTrung = true;
        if (ten) {
          const driverNames = item.AN.map(code => driverMap[code] || code);
          tenTrung = driverNames.some(name => name.includes(ten));
        }
        
        return ngayTrung && tenTrung;
      });
    }

    // ... (phần còn lại giữ nguyên)
})();
</script>




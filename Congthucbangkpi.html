<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tài Liệu Hướng Dẫn KPI Sale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#2563EB',
                        secondary: '#475569',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                    }
                }
            }
        }
    </script>
    <style>
        html { scroll-behavior: smooth; }
        body { background-color: #f8fafc; }
        .formula-box {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Monaco', 'Consolas', monospace;
            border-left: 4px solid #3b82f6;
            margin: 0.5rem 0;
            overflow-x: auto;
        }
        .nav-item.active {
            color: #2563EB;
            border-left: 2px solid #2563EB;
            background-color: #EFF6FF;
            font-weight: 600;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="text-slate-700 antialiased">

    <!-- Top Navigation -->
    <nav class="bg-white border-b border-slate-200 fixed w-full z-50 top-0 shadow-sm h-16 flex items-center">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold">
                    K
                </div>
                <span class="font-bold text-xl text-slate-800">KPI System Docs</span>
            </div>
            <div class="text-sm text-slate-500 hidden md:block">
                Phiên bản: <span class="font-semibold text-slate-700">1.0</span> | Cập nhật: <span class="font-semibold text-slate-700">2024</span>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 pt-24 pb-12 flex flex-col lg:flex-row gap-8">
        
        <!-- Sidebar Navigation (Desktop) -->
        <aside class="hidden lg:block w-64 flex-shrink-0 h-[calc(100vh-6rem)] sticky top-24 overflow-y-auto pr-4">
            <h3 class="font-bold text-slate-900 mb-4 px-3 uppercase text-xs tracking-wider">Mục Lục</h3>
            <ul class="space-y-1 text-sm" id="sidebar-nav">
                <!-- Javascript will populate this -->
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 min-w-0">
            
            <!-- Header Section -->
            <header class="mb-10">
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4">Công Thức Tính Toán KPI</h1>
                <p class="text-lg text-slate-600">
                    Tài liệu chi tiết logic xử lý dữ liệu trong file <code class="bg-slate-200 px-1 py-0.5 rounded text-slate-800 text-base">KPIsale.html</code>.
                </p>
                
                <!-- Data Sources Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                    <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-start gap-3">
                        <div class="p-2 bg-orange-100 text-orange-600 rounded-lg"><i class="fas fa-database"></i></div>
                        <div>
                            <h4 class="font-semibold text-slate-800">F3.json</h4>
                            <p class="text-xs text-slate-500">Dữ liệu đơn hàng Realtime</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-start gap-3">
                        <div class="p-2 bg-blue-100 text-blue-600 rounded-lg"><i class="fas fa-bullhorn"></i></div>
                        <div>
                            <h4 class="font-semibold text-slate-800">Báo Cáo MKT</h4>
                            <p class="text-xs text-slate-500">Dữ liệu Chi phí QC</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-start gap-3">
                        <div class="p-2 bg-purple-100 text-purple-600 rounded-lg"><i class="fas fa-users"></i></div>
                        <div>
                            <h4 class="font-semibold text-slate-800">HR Data</h4>
                            <p class="text-xs text-slate-500">Thông tin nhân sự/Team</p>
                        </div>
                    </div>
                </div>
            </header>

            <hr class="border-slate-200 mb-10">

            <!-- Content Loop -->
            <div class="space-y-12">

                <!-- 1. CPQC -->
                <section id="item-cpqc" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold">1</span>
                        <h2 class="text-2xl font-bold text-slate-800">CPQC (Chi phí quảng cáo)</h2>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="mb-4">
                            <span class="text-xs font-bold uppercase tracking-wider text-slate-500 mb-1 block">Nguồn dữ liệu</span>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                BAO_CAO_MKT_URL
                            </span>
                        </div>
                        <div class="mb-4">
                            <span class="text-xs font-bold uppercase tracking-wider text-slate-500 mb-1 block">Công thức</span>
                            <div class="formula-box">CPQC = Tổng (CPOC hoặc CPQC từ báo cáo MKT)</div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100">
                                <h4 class="font-semibold text-yellow-800 text-sm mb-2"><i class="fas fa-filter mr-1"></i> Điều kiện lọc</h4>
                                <ul class="list-disc list-inside text-sm text-yellow-900 space-y-1">
                                    <li>Chỉ lấy đơn có cột <strong>Ca</strong> là "Hết ca".</li>
                                    <li>Lọc theo khoảng thời gian, Team, Tên nhân viên (nếu có).</li>
                                </ul>
                            </div>
                            <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                                <h4 class="font-semibold text-slate-800 text-sm mb-2"><i class="fas fa-calculator mr-1"></i> Logic tính toán</h4>
                                <p class="text-sm text-slate-600">Group dữ liệu theo <code>(Tên nhân viên, Ngày)</code> sau đó cộng dồn.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 2. Số đơn chốt -->
                <section id="item-don-chot" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold">2</span>
                        <h2 class="text-2xl font-bold text-slate-800">Số Đơn Chốt</h2>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="flex flex-wrap gap-4 mb-4">
                            <div>
                                <span class="text-xs font-bold uppercase tracking-wider text-slate-500 mb-1 block">Nguồn</span>
                                <span class="text-sm font-semibold text-slate-700">F3.json</span>
                            </div>
                        </div>
                        <div class="formula-box">Số đơn chốt = Đếm (count) tất cả đơn hàng theo nhân viên</div>
                        <div class="mt-4 p-4 bg-indigo-50 border border-indigo-100 rounded-lg">
                            <h4 class="font-semibold text-indigo-800 text-sm mb-1">Lưu ý quan trọng</h4>
                            <p class="text-sm text-indigo-700">Mỗi đơn hàng chỉ tính <strong>1 lần</strong> cho mỗi nhân viên. Nếu đơn hàng có nhiều role (MKT, Sale, Vận đơn), mỗi người được tính riêng biệt.</p>
                        </div>
                    </div>
                </section>

                <!-- 3. DS Chốt -->
                <section id="item-ds-chot" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold">3</span>
                        <h2 class="text-2xl font-bold text-slate-800">Doanh Số Chốt</h2>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="formula-box">DS Chốt = SUM (Tổng_tiền_VNĐ)</div>
                        <p class="text-sm text-slate-600 mt-2">Tính tổng tiền của tất cả các đơn hàng thuộc về nhân viên đó.</p>
                    </div>
                </section>

                <!-- 4 & 5. Hủy -->
                <section id="item-huy" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-rose-100 text-rose-600 flex items-center justify-center font-bold">4-5</span>
                        <h2 class="text-2xl font-bold text-slate-800">Chỉ Số Hủy (Số đơn & Doanh số)</h2>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h3 class="font-semibold text-lg text-rose-600 mb-2">Số đơn hủy</h3>
                                <div class="formula-box">COUNT(Kết quả Check == "Huỷ")</div>
                                <p class="text-sm text-slate-500 mt-2"><strong>Điều kiện:</strong> Cột Kết quả Check phải chính xác là "Huỷ" (phân biệt hoa thường).</p>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg text-rose-600 mb-2">Doanh số hủy</h3>
                                <div class="formula-box">SUM(Tổng_tiền_VNĐ) WHERE Check == "Huỷ"</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 6 & 7. Sau Hủy -->
                <section id="item-sau-huy" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center font-bold">6-7</span>
                        <h2 class="text-2xl font-bold text-slate-800">Chỉ Số Sau Hủy</h2>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                         <div class="grid gap-4">
                            <div class="bg-slate-50 p-3 rounded border border-slate-200">
                                <span class="font-bold text-slate-700">Số đơn sau hủy</span> = 
                                <span class="text-blue-600">Số đơn chốt</span> - <span class="text-rose-600">Số đơn hủy</span>
                            </div>
                            <div class="bg-slate-50 p-3 rounded border border-slate-200">
                                <span class="font-bold text-slate-700">DS sau hủy</span> = 
                                <code>MAX(0, DS chốt - DS hủy)</code>
                            </div>
                         </div>
                         <div class="mt-4 text-sm text-slate-500">
                             <i class="fas fa-info-circle mr-1"></i> <strong>Lưu ý:</strong> Doanh số sau hủy không bao giờ nhận giá trị âm.
                         </div>
                    </div>
                </section>

                <!-- 8 & 9. Đơn đi -->
                <section id="item-don-di" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold">8-9</span>
                        <h2 class="text-2xl font-bold text-slate-800">Chỉ Số Đơn Đi (Tracking)</h2>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="mb-4">
                            <span class="text-xs font-bold uppercase tracking-wider text-slate-500 mb-1 block">Điều kiện tiên quyết</span>
                            <div class="inline-flex items-center px-3 py-1 rounded bg-yellow-100 text-yellow-800 text-sm font-medium">
                                Mã Tracking ≠ Rỗng
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-semibold text-slate-700">Số đơn đi</h4>
                                <div class="formula-box text-sm">Đếm các đơn có Mã Tracking</div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-slate-700">Doanh số đi</h4>
                                <div class="formula-box text-sm">Tổng tiền các đơn có Mã Tracking</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 10, 11, 14. Thu Tiền -->
                <section id="item-thu-tien" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center font-bold">10+</span>
                        <h2 class="text-2xl font-bold text-slate-800">Chỉ Số Thu Tiền & Hiệu Quả</h2>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 space-y-6">
                        
                        <!-- Row 1 -->
                        <div class="grid md:grid-cols-2 gap-6 pb-6 border-b border-slate-100">
                            <div>
                                <h3 class="font-bold text-slate-800 mb-2">10. Số đơn thu tiền</h3>
                                <p class="text-sm text-slate-600 mb-2">Đếm các đơn có:</p>
                                <code class="block bg-slate-100 p-2 rounded text-sm text-green-700">Tiền Việt đã đối soát > 0</code>
                            </div>
                            <div>
                                <h3 class="font-bold text-slate-800 mb-2">11. DThu Thành Công</h3>
                                <p class="text-sm text-slate-600 mb-2">Tổng tiền thực tế đã thu:</p>
                                <code class="block bg-slate-100 p-2 rounded text-sm text-green-700">SUM(Tiền Việt đã đối soát)</code>
                            </div>
                        </div>

                        <!-- Row 2 -->
                        <div>
                            <h3 class="font-bold text-slate-800 mb-2">14. Tỷ lệ thu tiền (%)</h3>
                            <div class="formula-box">(DThu thành công / DS đi) × 100%</div>
                            <p class="text-xs text-slate-500 mt-1">Nếu DS đi = 0 thì Tỷ lệ = 0%.</p>
                        </div>
                    </div>
                </section>

                <!-- 12, 13. Ship & KPI -->
                <section id="item-ship-kpi" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold">12-13</span>
                        <h2 class="text-2xl font-bold text-slate-800">Ship & DThu Tính KPI</h2>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="space-y-6">
                            <div>
                                <h4 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                    <i class="fas fa-truck text-slate-400"></i> Phí Ship
                                </h4>
                                <div class="formula-box">SUM(Phí ship) của các đơn ĐÃ ĐI</div>
                                <p class="text-sm text-red-500 mt-1"><i class="fas fa-times-circle"></i> KHÔNG tính phí ship cho đơn đã hủy.</p>
                            </div>
                            
                            <div class="p-4 bg-purple-50 rounded-lg border border-purple-100">
                                <h4 class="text-lg font-bold text-purple-900 mb-2">Doanh Thu Tính KPI</h4>
                                <div class="text-2xl font-mono text-purple-700 font-bold mb-2">
                                    DThu thành công - Phí Ship
                                </div>
                                <p class="text-sm text-purple-800">Đây là chỉ số quan trọng dùng để tính hiệu quả quảng cáo (CP/DT).</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 15. CP/DT -->
                <section id="item-cp-dt" class="scroll-mt-28">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center font-bold">15</span>
                        <h2 class="text-2xl font-bold text-slate-800">CP/DT (Chi phí / Doanh thu)</h2>
                    </div>
                    <div class="bg-gradient-to-r from-red-50 to-white rounded-xl border border-red-100 shadow-sm p-6">
                        <div class="formula-box border-red-400 bg-white text-slate-800 shadow-sm">
                            CP/DT = (CPQC / DThu tính KPI) × 100%
                        </div>
                        <div class="mt-4 grid md:grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-bold text-sm text-slate-700">Ví dụ minh họa:</h4>
                                <ul class="text-sm text-slate-600 space-y-1 mt-2">
                                    <li>CPQC: 1,000,000 VNĐ</li>
                                    <li>DThu tính KPI: 9,500,000 VNĐ</li>
                                    <li>=> <strong>10.53%</strong></li>
                                </ul>
                            </div>
                            <div class="flex items-center justify-center">
                                <p class="text-xs text-slate-400 text-center">Cho biết tỷ lệ chi phí quảng cáo so với doanh thu thực nhận (sau ship).</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Special Logic Section -->
                <section id="logic-dac-biet" class="scroll-mt-28 pt-8 border-t border-slate-200">
                    <h2 class="text-2xl font-bold text-slate-900 mb-6"><i class="fas fa-cogs mr-2 text-slate-400"></i>Logic Đặc Biệt & Ghi Chú</h2>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                            <h3 class="font-bold text-slate-800 mb-3">1. Xử lý Trùng Lặp & Bộ Phận</h3>
                            <ul class="space-y-2 text-sm text-slate-600">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-500 mt-1"></i>
                                    <span>Đơn hàng chỉ đếm <strong>1 lần/nhân viên</strong>.</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-500 mt-1"></i>
                                    <span><strong>Marketing:</strong> Lấy từ cột "Nhân viên Marketing"</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-500 mt-1"></i>
                                    <span><strong>Sale:</strong> Lấy từ cột "Nhân viên Sale"</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-green-500 mt-1"></i>
                                    <span><strong>Vận đơn:</strong> Lấy từ cột "NV Vận đơn"</span>
                                </li>
                            </ul>
                        </div>

                        <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                            <h3 class="font-bold text-slate-800 mb-3">2. Xử lý Dữ Liệu Thiếu</h3>
                            <ul class="space-y-2 text-sm text-slate-600">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-exclamation-circle text-orange-500 mt-1"></i>
                                    <span>Không tìm thấy giá trị ⮕ <strong>0</strong></span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-exclamation-circle text-orange-500 mt-1"></i>
                                    <span>Chia cho 0 ⮕ <strong>0</strong> (Không lỗi)</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-exclamation-circle text-orange-500 mt-1"></i>
                                    <span>Tên cột linh hoạt: <code>Tổng_tiền_VNĐ</code> hoặc <code>Tổng tiền VNĐ</code> đều nhận.</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="mt-6 bg-slate-800 text-white p-5 rounded-xl">
                        <h3 class="font-bold mb-2">Hàng "TỔNG CỘNG"</h3>
                        <p class="text-sm text-slate-300">
                            Các chỉ số tổng được tính bằng cách SUM giá trị của từng nhân viên hiển thị. <br>
                            <em>Ngoại lệ:</em> <strong>Số đơn sau hủy</strong> và <strong>DS sau hủy</strong> có thể được tính dựa trên tổng dữ liệu thô (F3 Records) thay vì cộng dồn từ bảng để đảm bảo chính xác tuyệt đối.
                        </p>
                    </div>
                </section>

            </div>

            <!-- Footer -->
            <footer class="mt-20 pt-6 border-t border-slate-200 text-center text-sm text-slate-500">
                <p>&copy; 2024 KPI Calculation System Reference. Version 1.0.</p>
                <div class="mt-2 flex justify-center gap-4 text-xs">
                    <span class="px-2 py-1 bg-slate-100 rounded">HTML</span>
                    <span class="px-2 py-1 bg-slate-100 rounded">JS</span>
                    <span class="px-2 py-1 bg-slate-100 rounded">Firebase</span>
                </div>
            </footer>
        </main>
    </div>

    <!-- Mobile Menu Button (Fixed Bottom Right) -->
    <button id="mobile-menu-btn" class="lg:hidden fixed bottom-6 right-6 w-12 h-12 bg-blue-600 text-white rounded-full shadow-lg flex items-center justify-center z-50">
        <i class="fas fa-list"></i>
    </button>

    <!-- Mobile Sidebar Modal -->
    <div id="mobile-sidebar" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden lg:hidden">
        <div class="absolute right-0 top-0 bottom-0 w-64 bg-white p-4 overflow-y-auto transform transition-transform translate-x-full duration-300" id="mobile-sidebar-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="font-bold text-lg">Mục Lục</h3>
                <button id="close-mobile-sidebar" class="text-slate-500"><i class="fas fa-times text-xl"></i></button>
            </div>
            <ul class="space-y-2 text-sm" id="mobile-nav-list">
                <!-- Javascript will populate this -->
            </ul>
        </div>
    </div>

    <script>
        // Data for Navigation
        const sections = [
            { id: 'item-cpqc', label: '1. CPQC (Chi phí)' },
            { id: 'item-don-chot', label: '2. Số đơn chốt' },
            { id: 'item-ds-chot', label: '3. Doanh số chốt' },
            { id: 'item-huy', label: '4-5. Chỉ số Hủy' },
            { id: 'item-sau-huy', label: '6-7. Chỉ số Sau Hủy' },
            { id: 'item-don-di', label: '8-9. Đơn đi / Tracking' },
            { id: 'item-thu-tien', label: '10-14. Thu tiền' },
            { id: 'item-ship-kpi', label: '12-13. Ship & DThu KPI' },
            { id: 'item-cp-dt', label: '15. CP/DT' },
            { id: 'logic-dac-biet', label: 'Logic & Ghi chú' }
        ];

        // Populate Sidebars
        function populateNav(containerId) {
            const container = document.getElementById(containerId);
            sections.forEach(section => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="#${section.id}" class="nav-item block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors">${section.label}</a>`;
                container.appendChild(li);
            });
        }

        populateNav('sidebar-nav');
        populateNav('mobile-nav-list');

        // Logic for Mobile Menu
        const mobileBtn = document.getElementById('mobile-menu-btn');
        const mobileSidebar = document.getElementById('mobile-sidebar');
        const mobileContent = document.getElementById('mobile-sidebar-content');
        const closeBtn = document.getElementById('close-mobile-sidebar');

        function toggleMenu() {
            const isHidden = mobileSidebar.classList.contains('hidden');
            if (isHidden) {
                mobileSidebar.classList.remove('hidden');
                setTimeout(() => mobileContent.classList.remove('translate-x-full'), 10);
            } else {
                mobileContent.classList.add('translate-x-full');
                setTimeout(() => mobileSidebar.classList.add('hidden'), 300);
            }
        }

        mobileBtn.addEventListener('click', toggleMenu);
        closeBtn.addEventListener('click', toggleMenu);
        mobileSidebar.addEventListener('click', (e) => {
            if (e.target === mobileSidebar) toggleMenu();
        });

        // Close mobile menu when clicking a link
        document.querySelectorAll('#mobile-nav-list a').forEach(link => {
            link.addEventListener('click', toggleMenu);
        });

        // Scroll Spy for Active State
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const element = document.getElementById(section.id);
                if (element && window.scrollY >= (element.offsetTop - 200)) {
                    current = section.id;
                }
            });

            document.querySelectorAll('.nav-item').forEach(li => {
                li.classList.remove('active');
                if (li.getAttribute('href').includes(current)) {
                    li.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>

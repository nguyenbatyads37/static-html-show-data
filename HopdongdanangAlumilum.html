<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hợp đồng thi công</title>
    <style>
        @page {
            size: A4;
            margin: 20mm 25mm;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Times New Roman', Times, serif;
            font-size: 13pt;
            line-height: 1.6;
            width: 210mm;
            min-height: 297mm;
            margin: 0 auto;
            padding: 20mm 25mm;
            background: white;
        }

        .container {
            width: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 15px;
        }

        .header h1 {
            font-size: 13pt;
            margin: 0;
            font-weight: bold;
            text-transform: uppercase;
        }

        .header h2 {
            font-size: 13pt;
            margin: 5px 0 0 0;
            text-decoration: underline;
            font-weight: bold;
        }

        .header p {
            margin: 5px 0;
            font-size: 11pt;
        }

        .location-date {
            text-align: right;
            font-style: italic;
            margin-bottom: 15px;
            font-size: 13pt;
        }

        .contract-title {
            text-align: center;
            margin: 20px 0 15px 0;
        }

        .contract-title h1 {
            font-size: 16pt;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .contract-title p {
            font-size: 13pt;
            margin: 0;
        }

        .content {
            margin-top: 15px;
        }

        .content > p {
            text-align: justify;
            margin: 10px 0;
            font-size: 13pt;
            line-height: 1.7;
        }

        .content p strong {
            font-weight: bold;
        }

        .content ul, .content ol {
            list-style-position: outside;
            padding-left: 30px;
            margin: 8px 0;
        }

        .content li {
            text-align: justify;
            margin: 5px 0;
            font-size: 13pt;
            line-height: 1.6;
        }

        .content ul li {
            list-style-type: none;
            position: relative;
        }

        .content ul li::before {
            content: "- ";
            position: absolute;
            left: -20px;
        }

        .aligned-line {
            display: flex;
            justify-content: space-between;
            padding-left: 20px;
            margin: 8px 0;
            text-align: justify;
            font-size: 13pt;
        }

        .article {
            margin-top: 25px;
        }

        .article-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 13pt;
            text-transform: uppercase;
        }

        .article ol {
            padding-left: 30px;
        }

        .article ol li {
            margin: 8px 0;
        }

        .article ul ul {
            padding-left: 25px;
            margin: 5px 0;
        }

        .signature-section {
            margin-top: 50px;
            display: flex;
            justify-content: space-around;
            text-align: center;
            page-break-inside: avoid;
        }

        .signature {
            flex: 1;
            font-weight: bold;
            font-size: 13pt;
        }

        .signature span {
            display: block;
            margin-bottom: 5px;
        }

        .signature p {
            margin: 0;
            font-style: italic;
            font-weight: normal;
            font-size: 11pt;
        }

        .hotline {
            font-weight: bold;
            text-align: left;
            margin-top: 30px;
            font-size: 13pt;
        }

        #contract-value-words {
            font-style: italic;
            padding-left: 20px;
            margin-top: 5px;
            font-size: 13pt;
        }

        /* Print styles */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
            }

            .container {
                width: 100%;
            }

            @page {
                size: A4;
                margin: 20mm 25mm;
            }
        }

        /* Highlight cho các trường điền từ URL */
        span[id] {
            background-color: transparent;
        }

        /* Style cho các số tiền */
        #tong_tien, #coc_tien, #dot2_tien {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</h1>
            <h2>Độc lập  - Tự do – Hạnh phúc</h2>
            <p>* * * * * * * * *</p>
        </div>
        
        <p class="location-date" id="date-display-1">
            Đà Nẵng, ngày <span id="ngay_ky">...</span> tháng <span id="thang_ky">...</span> năm <span id="nam_ky">....</span>.
        </p>

        <div class="contract-title">
            <h1>HỢP ĐỒNG THI CÔNG</h1>
            <p>Số: HĐTC <span id="so_hd">02/2025</span>/danangaluminium</p>
        </div>

        <div class="content">
            <p>- Căn cứ Luật Thương Mại của Quốc Hội Nước Cộng Hòa Xã Hội Chủ Nghĩa Việt Nam số 36/2005/QH 11 ngày 14/06/2006</p>
            <p>- Căn cứ và khả năng và nhu cầu của hai bên, dựa trên tinh thần trung thực và thiện chí hợp tác của hai bên.</p>
            <p id="date-display-2">
                Hôm nay, ngày <span id="ngay_ht">.....</span> tháng <span id="thang_ht">...</span> năm <span id="nam_ht">...</span> tại văn phòng Công Ty Cổ Phần nội thất nhôm kính Đà Nẵng Aluminium.
            </p>

            <p style="margin-top: 15px;"><strong>Bên A: (Ông/Bà): <span id="ten_kh">…..</span></strong></p>
            <p style="padding-left: 20px; margin: 5px 0;"><strong>Địa chỉ:</strong> <span id="dia_chi_kh">……………………………………………………………………………………………………………..</span></p>
            <p style="padding-left: 20px; margin: 5px 0;"><strong>Điện thoại:</strong> <span id="sdt_kh">................................................</span></p>
            <p style="padding-left: 20px; margin: 5px 0;"><strong>CMND/CCCD:</strong> <span id="cccd_kh">……………………………………………………………………………….</span></p>
            
            <p style="margin-top: 15px;"><strong>Bên B: CÔNG TY CỔ PHẦN NỘI THẤT NHÔM KÍNH ĐÀ NẴNG ALUMINIUM</strong></p>
            <div class="aligned-line" style="margin: 5px 0;">
                <span><strong>Đại diện:</strong> (Ông) PHẠM NGUYỄN HOÀNG ANH</span>
                <span><strong>Chức vụ:</strong> Giám đốc</span>
            </div>
            <p style="padding-left: 20px; margin: 5px 0;"><strong>Số CMND:</strong> 201554312</p>
            <div class="aligned-line" style="margin: 5px 0;">
                <span><strong>Thực hiện hợp đồng:</strong> (Ông) <span id="nguoi_thuc_hien">VÕ VĂN TRỌNG</span></span>
                <span><strong>Chức vụ:</strong> Phó giám đốc</span>
            </div>
            <p style="padding-left: 20px; margin: 5px 0;"><strong>Số CMND:</strong> <span id="cmnd_nguoi_thuc_hien">241278338</span></p>
            <p style="padding-left: 20px; margin: 5px 0;"><strong>Địa chỉ:</strong> 64 Đặng Văn Ngữ, Phường Khuê Trung, Quận Cẩm Lệ, TP Đà Nẵng.</p>
            <p style="padding-left: 20px; margin: 5px 0;"><strong>Điện thoại:</strong> <span id="sdt_b">0935683508</span> – 0775 988 928</p>
            <p style="padding-left: 20px; margin: 5px 0;"><strong>Mã số thuế:</strong> 0402 190 590</p>
            <p style="margin-top: 15px;">Sau khi thỏa thuận, hai bên thống nhất ký kết hợp đồng với các điều khoản sau:</p>
            
            <div class="article">
                <p class="article-title">Điều 1:<br>NỘI DUNG CÔNG VIỆC VÀ THỜI GIAN THỰC HIỆN</p>
                <ul>
                    <li>Bên A đồng ‎‎ý cho bên B thi công hạng mục công trình: Thi công lắp dựng các hạng mục căn cứ theo Phụ lục 01 hợp đồng số: <span id="phu_luc">PLHĐTC 02/2024/danangaluminium</span> , đính kèm bản vẽ.</li>
                    <li>Bên B thi công theo kích thước thực tế tại công trình, sau khi thi công xong 2 bên sẽ kiểm tra kích thước và số lượng thực tế để thanh lý hợp đồng.</li>
                    <li>Địa điểm lắp dựng: <span id="dia_diem">108 NGUYỄN QUANG LÂM</span> - ĐÀ NẴNG</li>
                    <li>Thời gian hoàn thành: <span id="thoi_gian">20</span> ngày kể từ ngày bàn giao mặt bằng</li>
                </ul>
            </div>

            <div class="article">
                <p class="article-title">Điều 2:<br>GIÁ TRỊ HỢP ĐỒNG VÀ PHƯƠNG THỨC THANH TOÁN</p>
                <ol>
                    <li>
                        <strong>Giá trị hợp đồng tạm tính:</strong> <span id="tong_tien">0</span> VNĐ (Chưa bao gồm thuế VAT)
                        <div id="contract-value-words">(Bằng chữ: .../.).</div>
                    </li>
                    <li>
                        <strong>Phương thức thanh toán:</strong>
                        <ul>
                            <li><strong>a/ Hình thức thanh toán:</strong> Thanh toán bằng chuyển khoản:
                                <ul>
                                    <li>Tài khoản số: 33556688 -Phạm Nguyễn Hoàng Anh - Sacombank, Chi nhánh Cẩm Lệ</li>
                                </ul>
                            </li>
                            <li><strong>b/ Thời hạn thanh toán:</strong> Chia làm 3 đợt:
                                <ul>
                                    <li>Đợt 1: Bên A tạm ứng cho bên B <span id="coc_tien">0</span> vnđ để giữ giá vật liệu. (Bằng chữ: <span id="coc_chu">….</span> đồng).</li>
                                    <li>Đợt 2: Bên A thanh toán 50% giá trị hợp đồng, khi bên B tập kết vật tư đầy đủ đến chân công trình tương ứng với số tiền là <span id="dot2_tien">0</span> vnđ (Bằng chữ: <span id="dot2_chu">….</span> đồng).</li>
                                    <li>Đợt 3: Bên A thanh toán số tiền còn lại sau khi lắp đặt hoàn thiện xong công trình theo khối lượng thực tế.</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="article">
                <p class="article-title">Điều 3:<br>TRÁCH NHIỆM CÁC BÊN</p>
                <ol>
                    <li><strong>Trách nhiệm bên A:</strong>
                        <ul>
                            <li>Bàn giao mặt bằng, giám sát, kiểm tra chất lượng, chủng loại hàng hóa và công tác lắp đặt.</li>
                            <li>Cử cán bộ giám sát nghiệm thu thực tế tại công trình.</li>
                            <li>Hỗ trợ điện cho bên B thi công lắp ráp tại hiện trường.</li>
                            <li>Thanh toán theo đúng thỏa thuận hợp đồng.</li>
                            <li>Có quyền trả và hủy hợp đồng nếu sảy ra sai sót hoạt do bên B thi công không theo tiến độ.</li>
                        </ul>
                    </li>
                    <li><strong>Trách nhiệm bên B:</strong>
                        <ul>
                            <li>Chịu trách nhiệm về toàn bộ chất lượng kỹ thuật, mỹ thuật của công trình phù hợp với thiết kế và dự toán được duyệt.</li>
                            <li>Những vật tư dùng cho công trình phải đúng chủng loại theo thiết kế và dự toán trước khi đưa vào công trình.</li>
                            <li>Chịu trách nhiệm hoàn toàn về an toàn lao động, PCCC và vệ sinh môi trường do bên B thi công trong suốt quá trình thi công công trình.</li>
                            <li>Quản lý tốt các hồ sơ, mặt bằng, thiết bị được bên A bàn giao.</li>
                            <li>Đảm bảo đúng tiến độ theo thỏa thuận.</li>
                            <li>Bảo hành công trình: bảo hành theo phụ lục đính kèm.</li>
                            <li>Cửa kính lề sàn bảo hành 2 năm, 0% chi phí bảo hành.</li>
                            <li>Chế độ bảo hành trong vòng 24h sẽ có nhân viên đến nếu sảy ra sự cố.</li>
                            <li>Tiến hành thu hồi sản phẩm đã lắp đặt nếu như bên A không thực hiện thanh toán đầy đủ.</li>
                            <li>Bảo hành các hệ cửa và vách kính 15 năm, Phụ kiện Bảo hành 5 năm.</li>
                            <li>Vách kính chống vô nước 99%.</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="article">
                <p class="article-title">Điều 4:<br>NGHIỆM THU, BÀN GIAO CÔNG TRÌNH</p>
                <ul>
                    <li>Bên A có trách nhiệm nghiệm thu công trình từ khi có thông báo của bên B, bên B có trách nhiệm chuẩn bị đầy đủ hồ sơ và thiết bị để nghiệm thu.</li>
                    <li>Bên A được quyền hủy hợp đồng và trả hàng, được bồi thường 100% giá trị hợp đồng nếu như Bên B vi phạm các điều khoản trên.</li>
                </ul>
            </div>

            <div class="article">
                <p class="article-title">Điều 5:<br>CAM KẾT CHUNG</p>
                <ul>
                    <li>Hai bên cam kết thực hiện đầy đủ các điều khoản đã ghi trong hợp đồng này. Trong quá trình thực hiện hợp đồng nếu có vướng mắc phải thông báo kịp thời cho nhau để cùng bàn bạc, xử lý trên nguyên tắc 2 bên cùng có lợi.</li>
                    <li>Trường hợp có tranh chấp hợp đồng, 2 bên không cùng giải quyết được thì đưa ra tòa án kinh tế TP Đà Nẵng để giải quyết. Quyết định của tòa án kinh tế là chung thẩm cho cả hai bên, mọi chi phí tranh chấp bên có lỗi chịu.</li>
                    <li>Hợp đồng này được thanh lý khi 02 bên đã hoàn thành nghĩa vụ của mình theo Hợp đồng này.</li>
                    <li>Hợp đồng này được lập thành 2 bản, bên A giữ 1 bản, bên B giữ 1 bản và có giá trị pháp lý như nhau.</li>
                </ul>
            </div>

            <p class="hotline">HOTLINE BẢO HÀNH : 0968414260 MR.TRỌNG</p>

            <div class="signature-section">
                <div class="signature">
                    <span>ĐẠI DIỆN BÊN A</span>
                    <p>(Ký và ghi rõ họ tên)</p>
                </div>
                <div class="signature">
                    <span>QUẢN LÝ THI CÔNG</span>
                    <p>(Ký và ghi rõ họ tên)</p>
                </div>
                <div class="signature">
                    <span>ĐẠI DIỆN BÊN B</span>
                    <p>(Ký và ghi rõ họ tên)</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Đọc URL parameters ---
            const urlParams = new URLSearchParams(window.location.search);
            
            // --- Lấy dữ liệu từ URL hoặc dùng giá trị mặc định ---
            const ngayKy = urlParams.get('ngay_ky');
            const thangKy = urlParams.get('thang_ky');
            const namKy = urlParams.get('nam_ky');
            const soHd = urlParams.get('so_hd');
            const tenKh = urlParams.get('ten_kh');
            const diaChiKh = urlParams.get('dia_chi_kh');
            const sdtKh = urlParams.get('sdt_kh');
            const cccdKh = urlParams.get('cccd_kh');
            const nguoiThucHien = urlParams.get('nguoi_thuc_hien');
            const cmndNguoiThucHien = urlParams.get('cmnd_nguoi_thuc_hien');
            const sdtB = urlParams.get('sdt_b');
            const phuLuc = urlParams.get('phu_luc');
            const diaDiem = urlParams.get('dia_diem');
            const thoiGian = urlParams.get('thoi_gian');
            const tongTien = urlParams.get('tong_tien');
            const cocTien = urlParams.get('coc_tien');
            const dot2Tien = urlParams.get('dot2_tien');

            // --- Tự động cập nhật ngày (nếu không có từ URL) ---
            const today = new Date();
            const day = ngayKy || today.getDate();
            const month = thangKy || (today.getMonth() + 1);
            const year = namKy || today.getFullYear();

            // --- Điền dữ liệu vào các phần tử ---
            function setElementValue(id, value, defaultValue = '') {
                const element = document.getElementById(id);
                if (element && value) {
                    element.textContent = decodeURIComponent(value);
                } else if (element && defaultValue) {
                    element.textContent = defaultValue;
                }
            }

            // Điền ngày tháng năm
            setElementValue('ngay_ky', ngayKy, day);
            setElementValue('thang_ky', thangKy, month);
            setElementValue('nam_ky', namKy, year);
            setElementValue('ngay_ht', ngayKy, day);
            setElementValue('thang_ht', thangKy, month);
            setElementValue('nam_ht', namKy, year);

            // Điền các thông tin khác
            setElementValue('so_hd', soHd, '02/2025');
            setElementValue('ten_kh', tenKh);
            setElementValue('dia_chi_kh', diaChiKh);
            setElementValue('sdt_kh', sdtKh);
            setElementValue('cccd_kh', cccdKh);
            setElementValue('nguoi_thuc_hien', nguoiThucHien, 'VÕ VĂN TRỌNG');
            setElementValue('cmnd_nguoi_thuc_hien', cmndNguoiThucHien, '241278338');
            setElementValue('sdt_b', sdtB, '0935683508');
            setElementValue('phu_luc', phuLuc, 'PLHĐTC 02/2024/danangaluminium');
            setElementValue('dia_diem', diaDiem, '108 NGUYỄN QUANG LÂM');
            setElementValue('thoi_gian', thoiGian, '20');
            
            // Format số tiền với dấu chấm phân cách
            function formatCurrency(value) {
                if (!value) return '0';
                // Loại bỏ tất cả ký tự không phải số
                const numValue = value.toString().replace(/[^0-9]/g, '');
                if (!numValue) return '0';
                // Thêm dấu chấm phân cách hàng nghìn
                return numValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            }
            
            setElementValue('tong_tien', tongTien ? formatCurrency(tongTien) : '0');
            setElementValue('coc_tien', cocTien ? formatCurrency(cocTien) : '0');
            setElementValue('dot2_tien', dot2Tien ? formatCurrency(dot2Tien) : '0');

            // --- Chuyển đổi số thành chữ cho tổng tiền ---
            const tongTienElement = document.getElementById('tong_tien');
            const wordsOutput = document.getElementById('contract-value-words');

            function updateTongTienWords() {
                const tongTienValue = tongTienElement ? tongTienElement.textContent : '0';
                // Loại bỏ dấu chấm phân cách hàng nghìn
                const cleanValue = tongTienValue.replace(/\./g, '');
                const numberValue = parseInt(cleanValue);
                
                if (numberValue && numberValue > 0) {
                    const words = numberToVietnameseWords(numberValue);
                    if (wordsOutput) {
                        wordsOutput.innerText = `(Bằng chữ: ${words}.)`;
                    }
                } else {
                    if (wordsOutput) {
                        wordsOutput.innerText = `(Bằng chữ: .../.).`;
                    }
                }
            }

            // Cập nhật khi có giá trị từ URL
            if (tongTien) {
                updateTongTienWords();
            }

            // Observer để theo dõi thay đổi của tổng tiền
            if (tongTienElement) {
                const observer = new MutationObserver(updateTongTienWords);
                observer.observe(tongTienElement, { childList: true, characterData: true, subtree: true });
            }

            // Chuyển đổi số tiền cọc và đợt 2 thành chữ
            function updateCocWords() {
                const cocTienElement = document.getElementById('coc_tien');
                const cocChuElement = document.getElementById('coc_chu');
                if (cocTienElement && cocChuElement) {
                    const cocValue = cocTienElement.textContent.replace(/\./g, '');
                    const numberValue = parseInt(cocValue);
                    if (numberValue && numberValue > 0) {
                        const words = numberToVietnameseWords(numberValue);
                        cocChuElement.textContent = words;
                    }
                }
            }

            function updateDot2Words() {
                const dot2TienElement = document.getElementById('dot2_tien');
                const dot2ChuElement = document.getElementById('dot2_chu');
                if (dot2TienElement && dot2ChuElement) {
                    const dot2Value = dot2TienElement.textContent.replace(/\./g, '');
                    const numberValue = parseInt(dot2Value);
                    if (numberValue && numberValue > 0) {
                        const words = numberToVietnameseWords(numberValue);
                        dot2ChuElement.textContent = words;
                    }
                }
            }

            // Cập nhật khi có giá trị từ URL
            if (cocTien) {
                setTimeout(updateCocWords, 100);
            }
            if (dot2Tien) {
                setTimeout(updateDot2Words, 100);
            }

            // Observer để theo dõi thay đổi
            const cocTienElement = document.getElementById('coc_tien');
            const dot2TienElement = document.getElementById('dot2_tien');
            if (cocTienElement) {
                const observer = new MutationObserver(updateCocWords);
                observer.observe(cocTienElement, { childList: true, characterData: true, subtree: true });
            }
            if (dot2TienElement) {
                const observer = new MutationObserver(updateDot2Words);
                observer.observe(dot2TienElement, { childList: true, characterData: true, subtree: true });
            }

            function numberToVietnameseWords(number) {
                const units = ["", "một", "hai", "ba", "bốn", "năm", "sáu", "bảy", "tám", "chín"];
                const tens = ["linh", "mười", "hai mươi", "ba mươi", "bốn mươi", "năm mươi", "sáu mươi", "bảy mươi", "tám mươi", "chín mươi"];
                const hundreds = ["không trăm", "một trăm", "hai trăm", "ba trăm", "bốn trăm", "năm trăm", "sáu trăm", "bảy trăm", "tám trăm", "chín trăm"];
                const groups = ["", "nghìn", "triệu", "tỷ"];

                function readThreeDigits(nStr, isFull) {
                    let num = parseInt(nStr);
                    if (num === 0) return "";

                    let result = [];
                    let h = Math.floor(num / 100);
                    let t = Math.floor((num % 100) / 10);
                    let u = num % 10;
                    
                    if(isFull || h > 0) {
                         result.push(hundreds[h]);
                    }

                    if (t === 0 && u !== 0 && (isFull || h > 0) ) {
                        result.push(tens[0]); // linh
                    } else if (t > 0) {
                        if (t === 1) result.push("mười");
                        else result.push(tens[t]);
                    }

                    if (u !== 0) {
                         if (t > 1 && u === 1) result.push("mốt");
                         else if (u === 5 && t > 0) result.push("lăm");
                         else if (t === 1 && u === 5) result.push("lăm");
                         else result.push(units[u]);
                    }
                    
                    return result.join(' ').trim().replace(/\s+/g, ' ');
                }

                if (number == 0) return "Không đồng";
                let numStr = number.toString();
                if (numStr.length > 12) return "Số quá lớn!";
                
                let numParts = [];
                while (numStr.length > 0) {
                    numParts.unshift(numStr.slice(Math.max(0, numStr.length - 3)));
                    numStr = numStr.slice(0, Math.max(0, numStr.length - 3));
                }

                let words = [];
                for (let i = 0; i < numParts.length; i++) {
                    let part = numParts[i];
                    let partWords = readThreeDigits(part, i > 0 && parseInt(part) > 0);
                    if (partWords) {
                        words.push(partWords);
                        words.push(groups[numParts.length - 1 - i]);
                    }
                }
                
                let finalWords = words.join(' ').replace(/\s+/g, ' ').trim();
                finalWords = finalWords.charAt(0).toUpperCase() + finalWords.slice(1);

                return finalWords + " đồng";
            }
        });
    </script>
</body>
</html>




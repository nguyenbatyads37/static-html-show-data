<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÀI TẬP TIẾP TUYẾN</title>
    <style>
        /* ... (giữ nguyên các phần style khác) ... */
        
        .question-container {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-start;
        }
        
        .question-text {
            flex: 1;
            min-width: 0;
            /* Thêm thuộc tính để văn bản tràn sang phải khi không có ảnh */
            margin-right: 0;
            padding-right: 0;
        }
        
        .question-image {
            width: auto; /* Thay đổi từ 150px thành auto */
            max-width: 150px; /* Giới hạn tối đa */
            margin-left: 15px;
            flex-shrink: 0;
        }
        
        /* Ẩn hoàn toàn phần image-container khi không có ảnh */
        .question-image:empty {
            display: none;
        }
        
        /* ... (giữ nguyên các phần style khác) ... */
    </style>
</head>
      <div class="question">
        <span id="sheet-question"><span class="loading"></span>
        </div>
    <script>
        // Lấy câu hỏi từ Google Sheets (cách 3 - sheet phải ở chế độ công khai)
        document.addEventListener('DOMContentLoaded', function() {
            const sheetId = '1A_dOp5TFnaRt0L23xfMo-4rNcdwGI74ezXzn7yBlRCc';
            const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&tq=SELECT%20A%20WHERE%20A%20IS%20NOT%20NULL`;
            
            fetch(url)
                .then(res => res.text())
                .then(text => {
                    try {
                        // Xử lý response từ Google Sheets
                        const json = JSON.parse(text.substring(47).slice(0, -2));
                        const question = json.table.rows[0].c[0].v;
                        
                        // Hiển thị câu hỏi lên trang
                        document.getElementById('sheet-question').innerHTML = question;
                        
                        // Nếu có công thức toán, yêu cầu MathJax render lại
                        if (window.MathJax) {
                            MathJax.typeset();
                        }
                    } catch (e) {
                        console.error('Lỗi khi lấy dữ liệu từ Google Sheets:', e);
                        document.getElementById('sheet-question').innerHTML = 
                            'Không thể tải câu hỏi từ Google Sheets. Vui lòng kiểm tra lại liên kết hoặc quyền truy cập.';
                    }
                })
                .catch(error => {
                    console.error('Lỗi khi tải dữ liệu:', error);
                    document.getElementById('sheet-question').innerHTML = 
                        'Lỗi khi tải câu hỏi từ Google Sheets. Vui lòng thử lại sau.';
                });
        });
    </script>
</body>
</html>

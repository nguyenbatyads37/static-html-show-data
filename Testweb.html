<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title><?= name ? "Chỉnh sửa dữ liệu" : "Thêm dữ liệu mới" ?></title>
  <style>
    /* nếu bạn có file Style.html, thay bằng <?!= include('Style'); ?> */
    body { font-family: Arial; max-width:500px; margin:20px auto; }
    label { display:block; margin-top:12px; }
    input, textarea { width:100%; padding:8px; box-sizing:border-box; }
    button { margin-top:16px; padding:10px 16px; }
  </style>
</head>
<body>
  <h2><?= name ? "Sửa thông tin" : "Thêm thông tin mới" ?></h2>
  <form id="dataForm">
    <label for="name">Tên:</label>
    <input type="text" name="name"    id="name"    value="<?= name ?>" required>

    <label for="email">Email:</label>
    <input type="email" name="email"  id="email"   value="<?= email ?>" required>

    <label for="message">Tin nhắn:</label>
    <textarea name="message" id="message" rows="4"><?= message ?></textarea>

    <button type="submit"><?= name ? "Lưu thay đổi" : "Gửi dữ liệu" ?></button>
  </form>
  <p id="responseMessage" style="margin-top:12px;color:green;"></p>

  <script>
    document.getElementById("dataForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const params = new URLSearchParams(new FormData(e.target)).toString();
      fetch("https://script.google.com/macros/s/AKfycby3O8YOA2aYBIQiUI1TKkSVdUPW5DXobI5WRPJMAwiPy9sdDjO1LGaAUfaibjRAWoK-sA/exec", {
        method: "POST",
        headers: {"Content-Type":"application/x-www-form-urlencoded"},
        body: params
      })
      .then(r => r.text())
      .then(txt => {
        const p = document.getElementById("responseMessage");
        p.style.color = txt.startsWith("Lỗi") ? "red" : "green";
        p.innerText = txt;
        if (!txt.startsWith("Lỗi")) e.target.reset();
      })
      .catch(err => alert("Lỗi gửi: " + err));
    });
  </script>
</body>
</html>


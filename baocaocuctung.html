<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phiếu Báo Cáo Sự Cố - Nhà Xe Cúc Tùng</title>
    <style>
        body { font-family: "Times New Roman", Times, serif; font-size: 14pt; line-height: 1.5; background-color: #f0f0f0; margin: 0; padding: 20px; }
        .container { width: 210mm; min-height: 297mm; background-color: white; margin: 0 auto; padding: 25mm 20mm; box-sizing: border-box; box-shadow: 0 0 10px rgba(0,0,0,0.1); position: relative; }
        .header { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .company-name, .national-motto { text-align: center; font-weight: bold; }
        .company-name p, .national-motto p { margin: 0; }
        .dash { display: block; margin-top: -5px; }
        .date-line { text-align: right; font-style: italic; margin-bottom: 30px; }
        h1 { text-align: center; text-transform: uppercase; font-size: 18pt; font-weight: bold; margin-bottom: 30px; }
        h3 { font-size: 14pt; font-weight: bold; text-decoration: underline; margin-top: 20px; margin-bottom: 10px; }
        .form-row { display: flex; align-items: baseline; margin-bottom: 8px; }
        .label { font-weight: bold; white-space: nowrap; margin-right: 10px; }
        .input-field { flex-grow: 1; border: none; border-bottom: 1px dotted #000; font-family: "Times New Roman", Times, serif; font-size: 14pt; outline: none; padding: 0 5px; background: transparent; }
        .watermark { position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%); opacity: 0.1; z-index: 0; pointer-events: none; width: 300px; text-align: center; }
        .watermark-circle { border: 5px solid red; border-radius: 50%; width: 300px; height: 300px; display: flex; align-items: center; justify-content: center; color: red; font-weight: bold; font-size: 20px; flex-direction: column; }
        .content { position: relative; z-index: 1; }
        @media print { body { background-color: white; padding: 0; } .container { box-shadow: none; width: 100%; margin: 0; padding: 10mm; } }
    </style>
</head>
<body>

    <div class="container">
        <!-- Logo mờ -->
        <div class="watermark">
            <div class="watermark-circle">
                <span>CÔNG TY TNHH MTV</span>
                <span style="font-size: 40px;">CÚC TÙNG</span>
                <span>LIMOUSINE</span>
            </div>
        </div>

        <div class="content">
            <div class="header">
                <div class="company-name">
                    <p>NHÀ XE CÚC TÙNG</p>
                    <span class="dash">---------</span>
                </div>
                <div class="national-motto">
                    <p>CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</p>
                    <p>Độc lập - Tự do - Hạnh phúc</p>
                    <span class="dash">-----------------------</span>
                </div>
            </div>

            <div class="date-line">
                .........., ngày ..... tháng ..... năm .....
            </div>

            <h1>PHIẾU BÁO CÁO SỰ CỐ</h1>

            <h3>I. &nbsp; Thông tin chuyến đi</h3>
            
            <div class="form-row">
                <span class="label">Mã chuyến đi :</span>
                <input type="text" class="input-field" id="mcd">
            </div>
            <div class="form-row">
                <span class="label">Thời gian khởi hành:</span>
                <input type="text" class="input-field" id="tgkh">
            </div>
            <div class="form-row">
                <span class="label">Điểm đón :</span>
                <input type="text" class="input-field" id="dd">
            </div>
            <div class="form-row">
                <span class="label">Điểm trả :</span>
                <input type="text" class="input-field" id="dt">
            </div>
            <div class="form-row">
                <span class="label">Tên tài xế:</span>
                <input type="text" class="input-field" id="ttx">
            </div>
            <div class="form-row">
                <span class="label">Tên điều phối viên:</span>
                <input type="text" class="input-field" id="tdpv">
            </div>
            <div class="form-row">
                <span class="label">Loại xe:</span>
                <input type="text" class="input-field" id="lx">
            </div>
            <div class="form-row">
                <span class="label">Biển số xe:</span>
                <input type="text" class="input-field" id="bsx">
            </div>
            <div class="form-row">
                <span class="label">Số lượng khách hàng:</span>
                <input type="number" class="input-field" id="slkh">
            </div>

            <h3>II. &nbsp; Thông tin sự cố</h3>

            <div class="form-row">
                <span class="label">Mã sự cố:</span>
                <input type="text" class="input-field" id="msc">
            </div>
            <div class="form-row">
                <span class="label">Tên kỹ thuật viên:</span>
                <input type="text" class="input-field" id="tktv">
            </div>
            <div class="form-row">
                <span class="label">Vị trí:</span>
                <input type="text" class="input-field" id="vt">
            </div>
            <div class="form-row">
                <span class="label">Thời gian xảy ra:</span>
                <!-- Đổi sang type text để nhận dữ liệu linh hoạt từ URL -->
                <input type="text" class="input-field" id="tgxr" placeholder="mm/dd/yyyy --:-- --"> 
            </div>
            <div class="form-row">
                <span class="label">Loại sự cố:</span>
                <input type="text" class="input-field" id="lsc">
            </div>
            <div class="form-row">
                <span class="label">Đối tượng:</span>
                <input type="text" class="input-field" id="dtu">
            </div>
            <div class="form-row">
                <span class="label">Sự cố chi tiết:</span>
                <input type="text" class="input-field" id="scct">
            </div>
            <div class="form-row">
                <span class="label">Mức độ:</span>
                <input type="text" class="input-field" id="md">
            </div>
            <div class="form-row">
                <span class="label">Phương án giải quyết chuẩn hóa:</span>
                <input type="text" class="input-field" id="pagq">
            </div>
            <div class="form-row">
                <span class="label">Trạng thái:</span>
                <input type="text" class="input-field" id="tt">
            </div>
            <div class="form-row">
                <span class="label">Ghi chú:</span>
                <input type="text" class="input-field" id="gc">
            </div>
        </div>
    </div>

    <script>
        // Hàm tự động điền dữ liệu khi trang tải xong
        window.addEventListener('DOMContentLoaded', (event) => {
            const params = new URLSearchParams(window.location.search);

            // Bảng ánh xạ: "tên biến trên URL" => "id của input"
            const mapping = {
                'mcd': 'mcd',    // Mã chuyến đi
                'tgkh': 'tgkh',  // Thời gian khởi hành
                'dd': 'dd',      // Điểm đón
                'dt': 'dt',      // Điểm trả
                'ttx': 'ttx',    // Tên tài xế
                'tdpv': 'tdpv',  // Tên điều phối viên
                'lx': 'lx',      // Loại xe
                'bsx': 'bsx',    // Biển số xe
                'slkh': 'slkh',  // Số lượng khách hàng
                'msc': 'msc',    // Mã sự cố
                'tktv': 'tktv',  // Tên kỹ thuật viên
                'vt': 'vt',      // Vị trí
                'tgxr': 'tgxr',  // Thời gian xảy ra
                'lsc': 'lsc',    // Loại sự cố
                'dtu': 'dtu',    // Đối tượng (dùng dtu để tránh trùng với Điểm trả)
                'scct': 'scct',  // Sự cố chi tiết
                'md': 'md',      // Mức độ
                'pagq': 'pagq',  // Phương án giải quyết
                'tt': 'tt',      // Trạng thái
                'gc': 'gc'       // Ghi chú
            };

            for (const [key, id] of Object.entries(mapping)) {
                if (params.has(key)) {
                    const value = params.get(key);
                    // Giải mã URL (nếu có ký tự đặc biệt) và gán vào input
                    const inputElement = document.getElementById(id);
                    if (inputElement) {
                        inputElement.value = value;
                    }
                }
            }
        });
    </script>
</body>
</html>

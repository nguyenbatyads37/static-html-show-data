<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báo Cáo Học Tập | Mai Lê Quyên</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Reset và font chữ */
        :root {
            --primary-color: #9b2d20;
            --secondary-color: #f9d423;
            --dark-color: #2c3e50;
            --light-color: #f8f9fa;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            color: var(--dark-color);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Container chính */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .report-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            padding-bottom: 1.5rem;
        }

        .report-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .report-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            letter-spacing: -0.5px;
        }

        .student-info {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .student-info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
            color: var(--dark-color);
        }

        .student-info-item i {
            color: var(--primary-color);
        }

        /* Card layout */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.2rem;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Stats */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .stat-item {
            text-align: center;
            padding: 1.5rem 1rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 500;
        }

        /* Progress bars */
        .progress-container {
            margin: 1.5rem 0;
        }

        .progress-title {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
        }

        /* Tables */
        .table-responsive {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--primary-color);
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.5px;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        .badge {
            display: inline-block;
            padding: 0.35em 0.65em;
            font-size: 0.75em;
            font-weight: 700;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: 0.25rem;
        }

        .badge-success {
            background-color: var(--success-color);
            color: white;
        }

        .badge-warning {
            background-color: var(--warning-color);
            color: var(--dark-color);
        }

        .badge-danger {
            background-color: var(--danger-color);
            color: white;
        }

        /* Comments */
        .comment-box {
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            margin: 1.5rem 0;
        }

        .comment-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-weight: bold;
        }

        .comment-teacher {
            font-weight: 600;
            color: var(--primary-color);
        }

        .comment-date {
            font-size: 0.8rem;
            color: #6c757d;
            margin-left: auto;
        }

        /* Rating */
        .rating-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #dee2e6;
        }

        .rating-stars {
            display: flex;
            gap: 0.5rem;
        }

        .rating-star {
            color: #ddd;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .rating-star.active {
            color: var(--warning-color);
        }

        .rating-star:hover {
            transform: scale(1.2);
        }

        /* Footer */
        .report-footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #dee2e6;
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .card-grid {
                grid-template-columns: 1fr;
            }
            
            .report-title {
                font-size: 2rem;
            }
            
            th, td {
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="report-header">
            <h1 class="report-title">BÁO CÁO HỌC TẬP</h1>
            <div class="student-info">
                <div class="student-info-item">
                    <i class="fas fa-user-graduate"></i>
                    <span id="student-name">Mai Lê Quyên</span>
                </div>
                <div class="student-info-item">
                    <i class="fas fa-layer-group"></i>
                    <span id="student-class">Lớp MOET Junior G6</span>
                </div>
                <div class="student-info-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Học kỳ II - 2025</span>
                </div>
            </div>
        </header>

        <div class="card-grid">
            <!-- Thống kê học tập -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-chart-line"></i> Thống kê học tập
                </div>
                <div class="card-body">
                    <div class="stats-container">
                        <div class="stat-item">
                            <div class="stat-value" id="average-score">8.0</div>
                            <div class="stat-label">Điểm trung bình</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="attendance">10</div>
                            <div class="stat-label">Chuyên cần</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="homework">5</div>
                            <div class="stat-label">Đánh giá</div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-title">
                            <span>Từ vựng</span>
                            <span>75%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-title">
                            <span>Ngữ pháp</span>
                            <span>82%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 82%"></div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-title">
                            <span>Phát âm</span>
                            <span>68%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 68%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nhận xét giáo viên -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-comment-alt"></i> Nhận xét giáo viên
                </div>
                <div class="card-body">
                    <div class="comment-box">
                        <div class="comment-header">
                            <div class="comment-avatar">DR</div>
                            <div class="comment-teacher">Dr. Henry Đàm</div>
                            <div class="comment-date">20/04/2025</div>
                        </div>
                        <p id="teacher-comment">Em là học sinh chăm chỉ, có thái độ học tập tích cực. Em thể hiện sự tiến bộ rõ rệt trong kỹ năng nghe nói. Cần tiếp tục cải thiện kỹ năng từ vựng và đọc hiểu để đạt kết quả tốt hơn.</p>
                    </div>

                    <div class="rating-container">
                        <div class="rating-stars" id="ratingStars">
                            <i class="fas fa-star rating-star" data-rating="1"></i>
                            <i class="fas fa-star rating-star" data-rating="2"></i>
                            <i class="fas fa-star rating-star" data-rating="3"></i>
                            <i class="fas fa-star rating-star" data-rating="4"></i>
                            <i class="fas fa-star rating-star" data-rating="5"></i>
                        </div>
                        <div class="rating-text">Đánh giá báo cáo</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chi tiết hàng ngày -->
        <div class="card">
            <div class="card-header">
                <i class="fas fa-calendar-day"></i> Chi tiết hàng ngày
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table id="daily-table">
                        <thead>
                            <tr>
                                <th>Ngày</th>
                                <th>Điểm</th>
                                <th>Nhận xét</th>
                                <th>Chuyên cần</th>
                                <th>Trạng thái</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dữ liệu sẽ được thêm bằng JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Bảng kiểm tra -->
        <div class="card">
            <div class="card-header">
                <i class="fas fa-clipboard-check"></i> Kết quả kiểm tra
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table id="test-table">
                        <thead>
                            <tr>
                                <th>Ngày</th>
                                <th>Loại kiểm tra</th>
                                <th>Điểm</th>
                                <th>Nhận xét</th>
                                <th>Xếp loại</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dữ liệu sẽ được thêm bằng JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <footer class="report-footer">
            <p>Báo cáo được tạo tự động vào ngày <span id="report-date">20/04/2025</span></p>
            <p>Trung tâm Anh ngữ MOET Junior - Số 123, Đường ABC, Quận XYZ, TP.HCM</p>
        </footer>
    </div>

    <script>
        // Hàm lấy tham số từ URL
        function getUrlParameter(name) {
            name = name.replace(/[\[\]]/g, '\\$&');
            const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
            const results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // Hàm xếp loại điểm
        function getGrade(score) {
            if (score >= 8.5) return 'Xuất sắc';
            if (score >= 7.0) return 'Tốt';
            if (score >= 5.5) return 'Khá';
            if (score >= 4.0) return 'Trung bình';
            return 'Yếu';
        }

        // Hàm tạo badge
        function createBadge(score) {
            const grade = getGrade(score);
            let badgeClass = 'badge-warning';
            
            if (grade === 'Xuất sắc' || grade === 'Tốt') {
                badgeClass = 'badge-success';
            } else if (grade === 'Yếu') {
                badgeClass = 'badge-danger';
            }
            
            return `<span class="badge ${badgeClass}">${grade}</span>`;
        }

        // Hàm xử lý dữ liệu ngày học
        function processDailyData(dataString) {
            if (!dataString) return [];
            
            const entries = dataString.split('_b_');
            const result = [];
            
            entries.forEach(entry => {
                if (!entry.trim()) return;
                
                const parts = entry.split('_a_');
                if (parts.length >= 6) {
                    result.push({
                        date: parts[0].trim(),
                        attendance: parts[1].trim(),
                        homework: parts[2].trim(),
                        score: parseFloat(parts[3].trim()) || 0,
                        strengths: parts[4].trim(),
                        weaknesses: parts[5].trim()
                    });
                }
            });
            
            return result;
        }

        // Hàm xử lý dữ liệu kiểm tra
        function processTestData(dataString) {
            if (!dataString) return [];
            
            const entries = dataString.split('_b_');
            const result = [];
            
            entries.forEach(entry => {
                if (!entry.trim()) return;
                
                const parts = entry.split('_a_');
                if (parts.length >= 3) {
                    result.push({
                        date: parts[0].trim(),
                        type: parts[1].trim(),
                        score: parseFloat(parts[2].trim()) || 0
                    });
                }
            });
            
            return result;
        }

        // Hàm hiển thị dữ liệu
        function displayData() {
            // Lấy tham số từ URL
            const name = getUrlParameter('ten') || 'Mai Lê Quyên';
            const className = getUrlParameter('lop') || 'MOET Junior G6';
            const averageScore = parseFloat(getUrlParameter('diem')) || 8.0;
            const attendance = getUrlParameter('chuyencan') || '10';
            const homework = getUrlParameter('btvn') || '5';
            const rating = parseInt(getUrlParameter('sao')) || 5;
            const comment = getUrlParameter('nhanxet') || 'Em là học sinh chăm chỉ, có thái độ học tập tích cực. Cần cải thiện kỹ năng từ vựng và đọc hiểu.';
            const dailyData = getUrlParameter('data') || '';
            const testData = getUrlParameter('idktra') || '';
            
            // Hiển thị thông tin cơ bản
            document.getElementById('student-name').textContent = name;
            document.getElementById('student-class').textContent = className;
            document.getElementById('average-score').textContent = averageScore.toFixed(1);
            document.getElementById('attendance').textContent = attendance;
            document.getElementById('homework').textContent = homework;
            document.getElementById('teacher-comment').textContent = comment;
            
            // Hiển thị rating
            const stars = document.querySelectorAll('.rating-star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                }
            });
            
            // Hiển thị dữ liệu hàng ngày
            const dailyTable = document.querySelector('#daily-table tbody');
            const processedDailyData = processDailyData(dailyData);
            
            if (processedDailyData.length > 0) {
                dailyTable.innerHTML = '';
                
                processedDailyData.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.date}</td>
                        <td>${item.score > 0 ? item.score.toFixed(1) : '-'}</td>
                        <td>${item.strengths || '-'}</td>
                        <td><i class="fas fa-check-circle" style="color: var(--success-color);"></i> ${item.attendance || 'Đúng giờ'}</td>
                        <td>${item.score > 0 ? createBadge(item.score) : '-'}</td>
                    `;
                    dailyTable.appendChild(row);
                });
            }
            
            // Hiển thị dữ liệu kiểm tra
            const testTable = document.querySelector('#test-table tbody');
            const processedTestData = processTestData(testData);
            
            if (processedTestData.length > 0) {
                testTable.innerHTML = '';
                
                processedTestData.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.date}</td>
                        <td>${item.type}</td>
                        <td>${item.score.toFixed(1)}</td>
                        <td>${item.score >= 8 ? 'Hoàn thành tốt' : item.score >= 6 ? 'Đạt yêu cầu' : 'Cần cải thiện'}</td>
                        <td>${createBadge(item.score)}</td>
                    `;
                    testTable.appendChild(row);
                });
            }
            
            // Cập nhật ngày báo cáo
            const today = new Date();
            const formattedDate = today.toLocaleDateString('vi-VN');
            document.getElementById('report-date').textContent = formattedDate;
        }

        // Khởi tạo khi trang load
        document.addEventListener('DOMContentLoaded', function() {
            // Hiển thị dữ liệu từ URL
            displayData();
            
            // Rating system
            const stars = document.querySelectorAll('.rating-star');
            let currentRating = 0;
            
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    currentRating = rating;
                    
                    stars.forEach((s, index) => {
                        if (index < rating) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                    
                    // Gửi đánh giá lên server (có thể thêm AJAX ở đây)
                    console.log(`Đánh giá: ${rating} sao`);
                });
                
                star.addEventListener('mouseover', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    
                    stars.forEach((s, index) => {
                        if (index < rating) {
                            s.classList.add('hover');
                        } else {
                            s.classList.remove('hover');
                        }
                    });
                });
                
                star.addEventListener('mouseout', function() {
                    stars.forEach(s => s.classList.remove('hover'));
                    
                    // Khôi phục đánh giá hiện tại khi không hover
                    stars.forEach((s, index) => {
                        if (index < currentRating) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                });
            });
        });
    </script>
</body>
</html>


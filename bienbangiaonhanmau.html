<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Biên bản giao nhận mẫu - Tự động truyền dữ liệu</title>
  <style>
    @page { size: A4; margin: 2cm; }
    body { font-family: 'Times New Roman', serif; font-size: 14px; line-height: 1.6; }
    /* Giữ nguyên toàn bộ CSS như trước */
  </style>
</head>
<body>

<!-- Nội dung biên bản (giống như trước) -->
<h2 class="title">BIÊN BẢN GIAO NHẬN MẪU</h2>
<div class="sub-title">Số phiếu kiểm nghiệm: <span id="so-phieu">-VS-25</span></div>

<!-- ... (các phần khác giữ nguyên) ... -->

<script>
  // Hàm mã hóa dữ liệu bảng
  function encodeTable() {
    const table = document.querySelector('table#bang-phan-tich');
    let data = '';
    
    table.querySelectorAll('tr').forEach((row, rowIndex) => {
      if (rowIndex > 0) data += '_b_';
      
      row.querySelectorAll('td, th').forEach((cell, cellIndex) => {
        if (cellIndex > 0) data += '_a_';
        data += cell.textContent.trim();
      });
    });
    return data;
  }

  // Tự động chuyển hướng khi trang tải xong
  window.onload = function() {
    const baseUrl = 'https://lab.example.com/nhan-mau';
    const params = new URLSearchParams();
    
    // Thêm các tham số cơ bản
    params.append('so_phieu', document.getElementById('so-phieu').textContent);
    params.append('ngay_lay_mau', document.getElementById('ngay-lay-mau').textContent);
    // ... (thêm các tham số khác tương tự) ...
    
    // Thêm dữ liệu bảng
    params.append('data', encodeTable());
    
    // Tự động chuyển hướng
    window.location.href = `${baseUrl}?${params.toString()}`;
  };
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hóa đơn đặt hàng</title>
    <style>
        body { font-family: Arial; margin: 10px; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        .info { margin: 5px 0; }
    </style>
</head>
<body>
    <div id="invoice">
        <h1 id="company-name">NPP HÀ HÒA</h1>
        <h2>HÓA ĐƠN ĐẶT HÀNG</h2>
        
        <div class="info">
            <strong>Mã đơn:</strong> <span id="order-id">DH00000</span>
        </div>
        
        <table id="product-table">
            <thead>
                <tr>
                    <th>STT</th>
                    <th>Tên hàng</th>
                    <th>Số lượng</th>
                    <th>Đơn giá</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody id="table-body">
                <!-- Dữ liệu sẽ được thêm bằng JS -->
            </tbody>
        </table>
        
        <div class="info">
            <strong>Tổng tiền:</strong> <span id="total-amount">0</span>đ
        </div>
    </div>

    <script>
        // Hiển thị tất cả tham số URL để debug
        console.log("Tất cả tham số URL:", window.location.search);
        
        // Lấy tham số từ URL
        const params = new URLSearchParams(window.location.search);
        
        // Hiển thị từng tham số để kiểm tra
        console.log("Tham số id:", params.get('id'));
        console.log("Tham số iddata:", params.get('iddata'));
        
        // Cập nhật thông tin cơ bản
        if (params.get('id')) {
            document.getElementById('order-id').textContent = params.get('id');
        }
        
        if (params.get('ct')) {
            document.getElementById('company-name').textContent = decodeURIComponent(params.get('ct'));
        }
        
        // Xử lý dữ liệu bảng
        const tableBody = document.getElementById('table-body');
        if (params.get('iddata')) {
            try {
                const rows = params.get('iddata').split('_b_');
                let total = 0;
                
                rows.forEach((row, index) => {
                    const cols = row.split('_a_');
                    if (cols.length >= 5) {
                        const rowTotal = parseInt(cols[4]) || 0;
                        total += rowTotal;
                        
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${decodeURIComponent(cols[1])}</td>
                            <td>${cols[2]}</td>
                            <td>${parseInt(cols[3]).toLocaleString()}</td>
                            <td>${rowTotal.toLocaleString()}</td>
                        `;
                        tableBody.appendChild(tr);
                    }
                });
                
                document.getElementById('total-amount').textContent = total.toLocaleString();
            } catch (e) {
                console.error("Lỗi khi xử lý dữ liệu bảng:", e);
                tableBody.innerHTML = `<tr><td colspan="5" style="color:red">Lỗi tải dữ liệu sản phẩm</td></tr>`;
            }
        } else {
            tableBody.innerHTML = `<tr><td colspan="5">Không có dữ liệu sản phẩm</td></tr>`;
        }
    </script>
</body>
</html>
thay bằng giao diện này
hình ảnh logo lấy link sau 
https://www.appsheet.com/template/gettablefileurl?appName=B%C3%A1ogi%C3%A1s%E1%BA%A3nph%E1%BA%A9m-325045268&tableName=c%C3%A0i%20%C4%91%E1%BA%B7t%20APP&fileName=C%C3%A0i%20%C4%91%E1%BA%B7t%20APP_Images%2F79ab1bb2.%E1%BA%A2nh.040547.jpg
QR sẽ truyền qua biến qr=

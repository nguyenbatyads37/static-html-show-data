lấy link kết nối với code sau 
<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biên Bản Giao Nhận Hàng Hóa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 18px;
            margin: 0;
        }

        .header p {
            font-size: 14px;
            margin: 5px 0;
        }

        .content {
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid black;
        }

        th, td {
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        .signature {
            margin-top: 30px;
        }

        .signature p {
            margin: 5px 0;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>BIẾN BẢN GIAO NHẬN HÀNG HÓA</h1>
        <p>Số: ……/24-BBGN, ngày 08/01/2025 14:20</p>
    </div>

    <div class="content">
        <p><strong>KMI:</strong></p>
        <p>HGPT-8.2/BM09/Rev:02</p>
        <p>Ngày BH: 01/06/2018</p>

        <p><strong>Bên giao:</strong> HGPT MECHANICAL</p>
        <p><strong>Bên nhận:</strong> Hòa Phát</p>

        <p><strong>Đại diện:</strong> Nguyễn Công Đức</p>
        <p><strong>Chức vụ:</strong> Quản kho</p>
        <p><strong>Điện thoại:</strong> 0965486768</p>
        <p><strong>Nơi giao:</strong> Nhà máy sản xuất, đường số 8, KCN Hòa Cầm, Hòa Thọ Tây, Cẩm Lệ, Đà Nẵng.</p>

        <table>
            <thead>
                <tr>
                    <th>TT</th>
                    <th>qr</th>
                    <th>TÊN CẤU KIỆN</th>
                    <th>SỐ LƯỢNG</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- Các hàng sẽ được thêm động ở đây -->
            </tbody>
        </table>
    </div>

    <div class="signature">
        <p><strong>Đại diện bên giao:</strong></p>
        <p>Nguyễn Công Đức</p>
        <p><strong>Đại diện bên nhận:</strong></p>
        <p>Hòa Phát</p>
    </div>
<div class="total-amount">
    <p><strong>Thành tiền:</strong> <span id="thanhtien"></span></p>
</div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        document.getElementById("thanhtien").textContent = thanhtien;

        // Hàm chuyển đổi dữ liệu từ URL
        function convertToMap(input) {
            const pairs = input.split('_b_');
            const map = new Map();

            pairs.forEach(pair => {
                const [key, chiTietSanPham, soLuongSanPham] = pair.split("_a_");

                if (!map.has(key)) {
                    map.set(key, []);
                }
                map.get(key).push({ chiTietSanPham: chiTietSanPham, soLuongSanPham: soLuongSanPham });
            });

            return map;
        }

        // Lấy dữ liệu từ URL
        const gui = urlParams.get('gui');
        const mst = urlParams.get('mst');
        const diachi = urlParams.get('diachi');
        const lienhe = urlParams.get('lienhe');
        const chitiet = urlParams.get('chitiet');
        const dongia = urlParams.get('dongia');
        const ghichu = urlParams.get('ghichu');
        const tongcong = urlParams.get('tongcong');
        const chietkhau = urlParams.get('chietkhau');
        const vat = urlParams.get('vat');
        const thanhtien = urlParams.get('thanhtien');

        // Xử lý dữ liệu chi tiết
        const resultMap = convertToMap(chitiet);

        // Xử lý dữ liệu đơn giá
        const mapDongia = new Map();
        if (dongia) {
            const dongias = dongia.split('_b_');
            for (var i = 0; i < dongias.length; i++) {
                const chitietDongia = dongias[i].split('_a_');
                const sanPham = chitietDongia[0];
                const gia = chitietDongia[1];
                mapDongia.set(sanPham, gia);
            }
        }

        // Xử lý dữ liệu ghi chú
        const mapGhichu = new Map();
        if (ghichu) {
            const ghichus = ghichu.split('_b_');
            for (var i = 0; i < ghichus.length; i++) {
                const chitietGhichu = ghichus[i].split('_a_');
                let ghichu = "";
                for (var j = 1; j < chitietGhichu.length; j++) {
                    ghichu += chitietGhichu[j] + '-';
                }
                ghichu = ghichu.slice(0, -1);
                const sanPham = chitietGhichu[0];
                mapGhichu.set(sanPham, ghichu);
            }
        }

        // Điền dữ liệu vào bảng
        const tableBody = document.getElementById("tableBody");
        let itemHtml = "";
        var index = 1;

        for (const [key, value] of resultMap.entries()) {
            const chitietSize = value.length;
            itemHtml += '<tr>' +
                '<td rowspan="' + chitietSize + '">' + index + '</td>' +
                '<td rowspan="' + chitietSize + '">' + key + '</td>' +
                '<td>' + value[0].chiTietSanPham + '</td>' +
                '<td>' + value[0].soLuongSanPham + '</td>' +
                '<td rowspan="' + chitietSize + '">' + mapDongia.get(key) + '</td>' +
                '<td rowspan="' + chitietSize + '" style="">' +
                '<img src="' + mapGhichu.get(key) + '" alt="Set Quà" class="img-fluid ghichu-img">' +
                '</td>' +
                '</tr>';

            if (chitietSize > 1) {
                for (var i = 1; i < chitietSize; i++) {
                    itemHtml += '<tr>' +
                        '<td>' + value[i].chiTietSanPham + '</td>' +
                        '<td>' + value[i].soLuongSanPham + '</td>' +
                        '</tr>';
                }
            }
            index++;
        }

        tableBody.innerHTML = itemHtml;
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phiếu Bảo Hành - Đà Nẵng Aluminium</title>
    <style>
        @page {
            size: A4;
            margin: 15mm 20mm;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            line-height: 1.5;
            width: 210mm;
            min-height: 297mm;
            margin: 0 auto;
            padding: 15mm 20mm;
            background: white;
        }

        .container {
            width: 100%;
            position: relative;
        }

        /* Watermark - Logo mờ */
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            z-index: 0;
            pointer-events: none;
            opacity: 0.08;
        }

        .watermark img {
            width: 400px;
            height: auto;
            max-width: 80%;
        }

        .content {
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #c41e3a;
            padding-bottom: 10px;
            position: relative;
        }

        .header-logo {
            margin-bottom: 10px;
        }

        .header-logo img {
            width: 100%;
            max-width: 100%;
            height: auto;
            object-fit: contain;
        }

        .company-name {
            font-size: 16pt;
            font-weight: bold;
            color: #c41e3a;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .company-info {
            font-size: 11pt;
            margin: 3px 0;
        }

        .hotline {
            font-size: 11pt;
            font-weight: bold;
            color: #c41e3a;
            margin-top: 5px;
        }

        /* Title */
        .title {
            text-align: center;
            font-size: 18pt;
            font-weight: bold;
            color: #c41e3a;
            margin: 20px 0;
            text-transform: uppercase;
        }

        /* Customer Info */
        .customer-info {
            margin: 20px 0;
            border: 1px solid #ddd;
            padding: 15px;
            background: #f9f9f9;
        }

        .info-row {
            display: flex;
            margin: 8px 0;
            align-items: center;
        }

        .info-label {
            font-weight: bold;
            min-width: 120px;
        }

        .info-value {
            flex: 1;
            border-bottom: 1px dotted #000;
            padding: 0 5px;
            min-height: 20px;
            position: relative;
        }

        .info-value::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            border-bottom: 1px dotted #000;
            pointer-events: none;
        }

        .info-row-full {
            margin: 8px 0;
        }

        .info-row-full .info-label {
            display: inline-block;
            min-width: 120px;
            font-weight: bold;
        }

        .address-line {
            display: inline-block;
            border-bottom: 1px dotted #000;
            min-width: 150px;
            padding: 0 5px;
        }

        /* Product Table */
        .product-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 1px solid #000;
        }

        .product-table th {
            background: #ffcccc;
            border: 1px solid #000;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 12pt;
        }

        .product-table td {
            border: 1px solid #000;
            padding: 10px;
            vertical-align: top;
        }

        .product-table td:first-child {
            text-align: center;
            width: 50px;
        }

        .product-table td:last-child {
            text-align: center;
            width: 100px;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #000;
            display: inline-block;
            margin: 0 auto;
        }

        .product-name {
            font-weight: bold;
        }

        .product-brand {
            font-size: 10pt;
            color: #666;
            margin-top: 5px;
        }

        /* Warranty Regulations */
        .warranty-regulations {
            margin: 20px 0;
            border: 1px solid #ddd;
            padding: 15px;
            background: #fff9e6;
        }

        .warranty-regulations h3 {
            color: #c41e3a;
            font-size: 13pt;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .warranty-regulations ul {
            list-style: none;
            padding-left: 0;
        }

        .warranty-regulations li {
            margin: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .warranty-regulations li::before {
            content: "•";
            position: absolute;
            left: 0;
            font-size: 16pt;
            color: #c41e3a;
        }

        /* Signature Section */
        .signature-section {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .signature-box {
            flex: 1;
            text-align: center;
            padding: 0 10px;
        }

        .warranty-badge {
            width: 180px;
            height: auto;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .warranty-badge img {
            width: 100%;
            height: auto;
            max-width: 180px;
            object-fit: contain;
        }


        .signature-label {
            font-weight: bold;
            margin-top: 10px;
            font-size: 12pt;
        }

        .signature-note {
            font-style: italic;
            font-size: 10pt;
            margin-top: 5px;
        }

        .signature-line {
            border-top: 1px solid #000;
            margin-top: 60px;
            padding-top: 5px;
        }


        /* Print Styles */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
            }

            .container {
                width: 100%;
            }

            @page {
                size: A4;
                margin: 15mm 20mm;
            }
        }

        /* Highlight fields */
        .highlight {
            background-color: yellow;
            padding: 0 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="watermark">
            <img src="https://www.appsheet.com/template/gettablefileurl?appName=Appsheet-325045268&tableName=Kho%20%E1%BA%A3nh&fileName=Kho%20%E1%BA%A3nh_Images%2Fd7290d01.%E1%BA%A2nh.141933.png" alt="Logo watermark" id="watermark_logo">
        </div>
        
        <div class="content">
            <!-- Header -->
            <div class="header">
                <div class="header-logo">
                    <img src="https://www.appsheet.com/template/gettablefileurl?appName=Appsheet-325045268&tableName=Kho%20%E1%BA%A3nh&fileName=Kho%20%E1%BA%A3nh_Images%2Fd7290d01.%E1%BA%A2nh.141933.png" alt="Logo Đà Nẵng Aluminium" id="company_logo">
                </div>
                <div class="company-name">CÔNG TY CỔ PHẦN NỘI THẤT NHÔM KÍNH ĐÀ NẴNG</div>
                <div class="company-info">Lô 611 - 613 Trần Nam Trung - Phường Hòa Xuân - Thành phố Đà Nẵng</div>
                <div class="company-info">Website: danangaluminium.vn</div>
                <div class="hotline">Hotline bảo hành: <span id="hotline_phone">0708 344 446</span> - <span id="hotline_sale">0926 033 777</span></div>
            </div>

            <!-- Title -->
            <div class="title">PHIẾU BẢO HÀNH</div>

            <!-- Customer Information -->
            <div class="customer-info">
                <div class="info-row">
                    <span class="info-label">Khách hàng:</span>
                    <span class="info-value" id="ten_kh"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Điện thoại:</span>
                    <span class="info-value" id="sdt_kh"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Địa chỉ:</span>
                    <span class="info-value" id="dia_chi_kh"></span>
                </div>
                <div class="info-row-full">
                    <span class="info-label">Xã/Phường:</span>
                    <span class="address-line" id="xa_phuong"></span>
                    <span class="info-label" style="margin-left: 20px;">Tỉnh/Thành phố:</span>
                    <span class="address-line" id="tinh_thanh"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Thời hạn bảo hành đến:</span>
                    <span class="info-value" id="thoi_han_bao_hanh" style="min-width: 200px;"></span>
                </div>
            </div>

            <!-- Product Table -->
            <table class="product-table">
                <thead>
                    <tr>
                        <th>TT</th>
                        <th>TÊN SẢN PHẨM</th>
                        <th>TÍCH CHỌN SP</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>
                            <div class="product-name">CỬA NHÔM KÍNH</div>
                            <div class="product-brand">THƯƠNG HIỆU DANANG ALUMINIUM</div>
                        </td>
                        <td>
                            <div class="checkbox" id="checkbox_1"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>
                            <div class="product-name">TỦ BẾP NHÔM HỢP KIM</div>
                            <div class="product-brand">THƯƠNG HIỆU DANANG ALUMINIUM</div>
                        </td>
                        <td>
                            <div class="checkbox" id="checkbox_2"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>
                            <div class="product-name">CỬA NHÔM TẤM TỔ ONG</div>
                            <div class="product-brand">THƯƠNG HIỆU DANANG ALUMINIUM</div>
                        </td>
                        <td>
                            <div class="checkbox" id="checkbox_3"></div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Warranty Regulations -->
            <div class="warranty-regulations">
                <h3>QUY ĐỊNH BẢO HÀNH</h3>
                <ul>
                    <li>Sản phẩm được bảo hành miễn phí đối với các lỗi kỹ thuật từ nhà sản xuất hoặc lỗi lắp đặt.</li>
                    <li>Không bảo hành trong các trường hợp: Hư hỏng do thiên tai, hỏa hoạn, tác động vật lý mạnh từ bên ngoài, hoặc do khách hàng tự ý sửa chữa.</li>
                </ul>
            </div>

            <!-- Signature Section -->
            <div class="signature-section">
                <div class="signature-box">
                    <div class="warranty-badge">
                        <img src="https://www.appsheet.com/template/gettablefileurl?appName=Appsheet-325045268&tableName=Kho%20%E1%BA%A3nh&fileName=Kho%20%E1%BA%A3nh_Images%2F992d5e75.%E1%BA%A2nh.141810.png" alt="Thẻ bảo hành" id="warranty_badge_image">
                    </div>
                    <div class="signature-label">CHẾ ĐỘ BẢO HÀNH</div>
                </div>
                <div class="signature-box">
                    <div class="signature-line">
                        <div class="signature-label">Đại diện khách hàng</div>
                        <div class="signature-note">(Ký và ghi rõ họ tên)</div>
                    </div>
                </div>
                <div class="signature-box">
                    <div class="signature-line">
                        <div class="signature-label">Đại diện công ty</div>
                        <div class="signature-note">(Ký và đóng dấu)</div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Đọc URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            
            // Hàm điền dữ liệu
            function setElementValue(id, value, defaultValue = '') {
                const element = document.getElementById(id);
                if (element && value) {
                    element.textContent = decodeURIComponent(value);
                } else if (element && defaultValue !== '') {
                    element.textContent = defaultValue;
                }
            }

            // Điền thông tin khách hàng
            setElementValue('ten_kh', urlParams.get('ten_kh'));
            setElementValue('sdt_kh', urlParams.get('sdt_kh'));
            setElementValue('dia_chi_kh', urlParams.get('dia_chi_kh'));
            setElementValue('xa_phuong', urlParams.get('xa_phuong'));
            setElementValue('tinh_thanh', urlParams.get('tinh_thanh'));
            
            // Thời hạn bảo hành
            const ngayHetHan = urlParams.get('ngay_het_han');
            const thangHetHan = urlParams.get('thang_het_han');
            const namHetHan = urlParams.get('nam_het_han');
            if (ngayHetHan && thangHetHan && namHetHan) {
                setElementValue('thoi_han_bao_hanh', `${ngayHetHan}/${thangHetHan}/${namHetHan}`);
            } else {
                // Tính toán thời hạn bảo hành (mặc định 24 tháng từ ngày hiện tại)
                const baoHanhThang = parseInt(urlParams.get('bao_hanh_thang')) || 24;
                const today = new Date();
                const hetHan = new Date(today);
                hetHan.setMonth(today.getMonth() + baoHanhThang);
                setElementValue('thoi_han_bao_hanh', 
                    `${hetHan.getDate()}/${hetHan.getMonth() + 1}/${hetHan.getFullYear()}`);
            }

            // Số tháng bảo hành
            const baoHanhThang = urlParams.get('bao_hanh_thang') || '24';
            setElementValue('bao_hanh_thang', baoHanhThang);

            // Hotline
            setElementValue('hotline_phone', urlParams.get('hotline_phone') || '0708 344 446');
            setElementValue('hotline_sale', urlParams.get('hotline_sale') || '0926 033 777');

            // Logo
            const logoUrl = urlParams.get('logo_url');
            const logoElement = document.getElementById('company_logo');
            if (logoElement && logoUrl) {
                logoElement.src = decodeURIComponent(logoUrl);
            }

            // Watermark logo
            const watermarkLogoElement = document.getElementById('watermark_logo');
            if (watermarkLogoElement && logoUrl) {
                watermarkLogoElement.src = decodeURIComponent(logoUrl);
            }


            // Warranty badge image
            const badgeImageUrl = urlParams.get('badge_image_url');
            const badgeImageElement = document.getElementById('warranty_badge_image');
            if (badgeImageElement && badgeImageUrl) {
                badgeImageElement.src = decodeURIComponent(badgeImageUrl);
            }


            // Tích chọn sản phẩm
            const sanPham = urlParams.get('san_pham');
            if (sanPham) {
                const products = sanPham.split(',');
                products.forEach(function(product) {
                    const productNum = product.trim();
                    const checkbox = document.getElementById('checkbox_' + productNum);
                    if (checkbox) {
                        checkbox.style.backgroundColor = '#c41e3a';
                        checkbox.innerHTML = '✓';
                        checkbox.style.color = 'white';
                        checkbox.style.textAlign = 'center';
                        checkbox.style.lineHeight = '16px';
                        checkbox.style.fontSize = '14pt';
                        checkbox.style.fontWeight = 'bold';
                    }
                });
            }
        });
    </script>
</body>
</html>
